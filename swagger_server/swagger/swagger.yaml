openapi: 3.0.3
info:
  title: ITM TA3 API
  description: |-
    This is the specification of the TA3 API for In The Moment (ITM).  Currently, the Evaluation API for TA2 supports functionality for the September milestone.

    The API is based on the OpenAPI 3.0 specification.
  version: 0.2.0
servers:
- url: /
tags:
- name: itm-ta2-eval
  description: Endpoints for TA2 Evaluation
paths:
  /ta2/startSession:
    get:
      tags:
      - itm-ta2-eval
      summary: Start a new session
      description: Get unique session id for grouping answers from a collection of
        scenarios/probes together
      operationId: start_session
      parameters:
      - name: adm_name
        in: query
        description: A self-assigned ADM name.  Can add authentication later.
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: session_type
        in: query
        description: "the type of session to start (`test`, `eval`, or a TA1 name)"
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: test
      - name: max_scenarios
        in: query
        description: "the maximum number of scenarios requested, supported only in\
          \ `test` sessions"
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int16
      responses:
        "200":
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string
                description: a new session Id to use in subsequent calls
                x-content-type: text/plain
        "400":
          description: Invalid session type or max_scenarios
        "418":
          description: The server is not ready to start a session
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/scenario:
    get:
      tags:
      - itm-ta2-eval
      summary: Get the next scenario
      description: "Get the next scenario in a session with the specified ADM name,\
        \ returning a Scenario object and unique id"
      operationId: start_scenario
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: query
        description: "a scenario id to start, used internally by TA3"
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation; scenario data returned, or session_complete\
            \ is True"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Scenario'
        "403":
          description: Specifying a scenario ID is unauthorized
        "404":
          description: Session or Scenario ID not found
        "418":
          description: The server is not ready to start a scenario
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/getAlignmentTarget:
    get:
      tags:
      - itm-ta2-eval
      summary: Retrieve alignment target for the scenario
      description: Retrieve alignment target for the scenario with the specified id
      operationId: get_alignment_target
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: query
        description: The ID of the scenario for which to retrieve alignment target
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, alignment target returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AlignmentTarget'
        "404":
          description: Session or Scenario ID not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/getState:
    get:
      tags:
      - itm-ta2-eval
      summary: Retrieve scenario state
      description: Retrieve state of the scenario with the specified id
      operationId: get_scenario_state
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: path
        description: The ID of the scenario for which to retrieve status
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "404":
          description: Invalid scenario ID supplied
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/getAvailableActions:
    get:
      tags:
      - itm-ta2-eval
      summary: Get a list of currently available ADM actions
      description: Retrieve a list of currently available actions in the scenario
        with the specified id
      operationId: get_available_actions
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: path
        description: The ID of the scenario for which to retrieve avaialble actions
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Successful operation; array of possible Actions returned
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Action'
                x-content-type: application/json
        "404":
          description: Invalid scenario ID supplied
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/getAvailableActionTypes:
    get:
      tags:
      - itm-ta2-eval
      summary: Get a list of currently available ADM action types
      description: Retrieve a list of currently available actions in the scenario
        with the specified id
      operationId: get_available_actions2
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: path
        description: The ID of the scenario for which to retrieve avaialble actions
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Successful operation; array of possible action types returned
            (see Action.action_type)
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                x-content-type: application/json
        "404":
          description: Invalid scenario ID supplied
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/directToSafezone:
    post:
      tags:
      - itm-ta2-eval
      summary: Direct casualties to the safe zone
      description: Verbally direct all mobile casualties to the safe zone
      operationId: direct_to_safezone
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: scenario_id
        in: path
        description: The ID of the scenario to direct mobile casualties
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id
        "404":
          description: Scenario not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/takeAction:
    post:
      tags:
      - itm-ta2-eval
      summary: Take an action within a scenario
      description: Take an action with
      operationId: take_action
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      requestBody:
        description: Encapsulation of an action taken by a DM in the context of the
          scenario
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Action'
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid action or session_id
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/checkVital:
    get:
      tags:
      - itm-ta2-eval
      summary: Assess and retrieve a vital sign
      description: Retrieve the specified vital sign of the specified casualty.
      operationId: check_vital
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to query
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: vital_sign
        in: query
        description: "The vital sign to retrieve, taken from controlled vocabulary"
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: RESPIRATION
          enum:
          - CONSCIOUSNESS
          - PULSE
          - RESPIRATION
          - ALL
      responses:
        "200":
          description: "Successful operation, casualty vitals returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Vitals'
        "400":
          description: Invalid session id or vital sign supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/checkVitals:
    get:
      tags:
      - itm-ta2-eval
      summary: Assess and retrieve all casualty vital signs
      description: Retrieve all vital signs of the specified casualty.
      operationId: check_vitals
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to query
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, casualty vitals returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Vitals'
        "400":
          description: Invalid session id
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/tag:
    post:
      tags:
      - itm-ta2-eval
      summary: Tag a casualty with a triage category
      description: Apply a triage tag to the specified casualty with the specified
        tag
      operationId: tag_casualty
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to tag
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: tag
        in: query
        description: "The tag to apply to the casualty, chosen from triage categories"
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: delayed
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or tag supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyTreatment:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply a treatment to a casualty
      description: Treat the specified casualty with the specified tool in the specified
        location
      operationId: apply_treatment
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to tag
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: tool
        in: query
        description: The tool to use to apply treatment (see Supplies)
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: Tourniquet
      - name: location
        in: query
        description: the injury location on the casualty's body (see Injury `location`)
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: right forearm
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: "Invalid session id, tool, or location supplied"
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/checkHeartRate:
    get:
      tags:
      - itm-ta2-eval
      summary: Check casualty heart rate
      description: Check the heart rate of the specified casualty.
      operationId: get_heart_rate
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to for which to request heart rate
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, heart rate returned in beats per minute"
          content:
            text/plain:
              schema:
                type: integer
                format: int16
                x-content-type: text/plain
        "400":
          description: Invalid session id
        "404":
          description: Casualty ID not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/checkRespiratoryRate:
    get:
      tags:
      - itm-ta2-eval
      summary: Check casualty respiratory rate
      description: Check the respiratory rate of the specified casualty.
      operationId: get_respiratory_rate
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to for which to request respiratory rate
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, respiratory rate returned in breaths/minute"
          content:
            text/plain:
              schema:
                type: integer
                format: int16
                x-content-type: text/plain
        "400":
          description: Invalid session id
        "404":
          description: Casualty ID not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/checkConsciousness:
    get:
      tags:
      - itm-ta2-eval
      summary: Check casualty consciousness
      description: Check the consciousness of the specified casualty
      operationId: get_consciousness
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to for which to check consciousness
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, consciousness returned as true or false"
          content:
            text/plain:
              schema:
                type: boolean
                x-content-type: text/plain
        "400":
          description: Invalid session id
        "404":
          description: Casualty ID not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyTourniquet:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply a tourniquet to a casualty
      description: Treat the specified casualty with a tourniquet in the specified
        location
      operationId: apply_tourniquet
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to treat
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: location
        in: query
        description: the injury location on the casualty's body (see Injury `location`)
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: right forearm
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or location supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyHemostaticGauze:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply hemostatic gauze to a casualty
      description: Treat the specified casualty with hemostatic gauze in the specified
        location
      operationId: apply_hemostatic_gauze
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to treat
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: location
        in: query
        description: the injury location on the casualty's body (see Injury `location`)
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: right forearm
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or location supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyPressureBandage:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply a pressure bandage to a casualty
      description: Treat the specified casualty with a pressure bandage in the specified
        location
      operationId: apply_pressure_bandage
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to treat
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: location
        in: query
        description: the injury location on the casualty's body (see Injury `location`)
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: right forearm
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or location supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyDecompressionNeedle:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply a decompression needle to a casualty
      description: Treat the specified casualty with a decompression needle in the
        specified location
      operationId: apply_decompression_needle
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to treat
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: location
        in: query
        description: the injury location on the casualty's body (see Injury `location`)
        required: true
        style: form
        explode: true
        schema:
          type: string
          example: right chest
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or location supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/casualty/{casualty_id}/applyNasalTrumpet:
    post:
      tags:
      - itm-ta2-eval
      summary: Apply a nasal trumpet to a casualty
      description: Treat the specified casualty with a nasal trumpet in the specified
        location
      operationId: apply_nasal_trumpet
      parameters:
      - name: session_id
        in: query
        description: "a unique session_id, as returned by /ta2/startSession"
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: casualty_id
        in: path
        description: The ID of the casualty to treat
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: "Successful operation, scenario state returned"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/State'
        "400":
          description: Invalid session id or location supplied
        "404":
          description: Casualty not found
        "500":
          description: An exception occurred on the server; see returned error string.
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
components:
  schemas:
    Scenario:
      required:
      - id
      - name
      type: object
      properties:
        id:
          type: string
          description: a globally unique id for the scenario
          default: "1234"
        name:
          type: string
          description: "human-readable scenario name, not necessarily unique"
          example: IED Explosion
        session_complete:
          type: boolean
          description: "set to true if the session is complete; that is, there are\
            \ no more scenarios"
          example: false
        startTime:
          type: string
          description: "the wall clock local start time of the scenario, expressed\
            \ as hh:mm"
          example: 14:02
        state:
          $ref: '#/components/schemas/State'
        triage_categories:
          type: array
          items:
            $ref: '#/components/schemas/TriageCategory'
      description: a tactical scenario
      example:
        session_complete: false
        name: IED Explosion
        startTime: 14:02
        id: "1234"
        state:
          mission:
            unstructured: Protect the high value intelligence officer.
            mission_type: Listening/Observation
          environment:
            visibility: 0.5
            fauna: "many insects, some amphibians and reptiles"
            flora: lush jungle vegetation
            lighting: 0.7
            noise_peak: 0.8
            noise_ambient: 0.5
            aidDelay: 40
            unstructured: unstructured
            weather: rainy
            temperature: 82.5
            humidity: 80
            location: jungle
            terrain: dense forest with a nearby rocky streambed
            soundscape: burbling brook punctuated by enemy gunfire
          supplies:
          - quantity: 4
            type: Tourniquet
          - quantity: 4
            type: Tourniquet
          unstructured: unstructured
          threat_state:
            unstructured: No additional threats are detected.
            threats:
            - key: threats
            - key: threats
          scenario_complete: false
          casualties:
          - assessed: false
            injuries:
            - severity: 0.8
              name: Laceration
              location: right forearm
            - severity: 0.8
              name: Laceration
              location: right forearm
            unstructured: unstructured
            name: Mary
            id: id
            tag: delayed
            vitals:
              RR: 40
              SpO2%: 95
              pain: 8
              consciousness: true
              mmHg: 180
              hrpmin: 150
            demographics:
              sex: F
              rank: Marine
              age: 32
          - assessed: false
            injuries:
            - severity: 0.8
              name: Laceration
              location: right forearm
            - severity: 0.8
              name: Laceration
              location: right forearm
            unstructured: unstructured
            name: Mary
            id: id
            tag: delayed
            vitals:
              RR: 40
              SpO2%: 95
              pain: 8
              consciousness: true
              mmHg: 180
              hrpmin: 150
            demographics:
              sex: F
              rank: Marine
              age: 32
          elapsedTime: 5.2
        triage_categories:
        - criteria: criteria
          description: description
          tagLabel: minimal
        - criteria: criteria
          description: description
          tagLabel: minimal
    AlignmentTarget:
      required:
      - id
      - kdma_values
      type: object
      properties:
        id:
          type: string
          description: globally unique alignment target id
        kdma_values:
          type: array
          description: list of KDMAs to align to
          items:
            $ref: '#/components/schemas/KDMA_Value'
      description: list of KDMAs to align to
      example:
        kdma_values:
        - value: 0.8
          kdma: mission
        - value: 0.8
          kdma: mission
        id: id
    KDMA_Value:
      required:
      - kdma
      - value
      type: object
      properties:
        kdma:
          type: string
          description: KDMA name
          example: mission
        value:
          type: number
          description: target alignment value
          format: float
          example: 0.8
      description: a KDMA and its value
      example:
        value: 0.8
        kdma: mission
    State:
      required:
      - unstructured
      type: object
      properties:
        unstructured:
          type: string
          description: text description of current state
        elapsedTime:
          type: number
          description: the elapsed time (in minutes) since the scenario started
          example: 5.2
        scenario_complete:
          type: boolean
          description: set to true if the scenario is complete; subsequent calls to
            /scenario/probe will return an error code
          example: false
        mission:
          $ref: '#/components/schemas/Mission'
        environment:
          $ref: '#/components/schemas/Environment'
        threat_state:
          $ref: '#/components/schemas/ThreatState'
        supplies:
          type: array
          description: a list of medical supplies available to the DM
          items:
            $ref: '#/components/schemas/Supplies'
        casualties:
          type: array
          description: the list of casualties/patients in the scenario
          items:
            $ref: '#/components/schemas/Casualty'
      description: the current tactical & environmental state of the scenario and
        of its casualties.
      example:
        mission:
          unstructured: Protect the high value intelligence officer.
          mission_type: Listening/Observation
        environment:
          visibility: 0.5
          fauna: "many insects, some amphibians and reptiles"
          flora: lush jungle vegetation
          lighting: 0.7
          noise_peak: 0.8
          noise_ambient: 0.5
          aidDelay: 40
          unstructured: unstructured
          weather: rainy
          temperature: 82.5
          humidity: 80
          location: jungle
          terrain: dense forest with a nearby rocky streambed
          soundscape: burbling brook punctuated by enemy gunfire
        supplies:
        - quantity: 4
          type: Tourniquet
        - quantity: 4
          type: Tourniquet
        unstructured: unstructured
        threat_state:
          unstructured: No additional threats are detected.
          threats:
          - key: threats
          - key: threats
        scenario_complete: false
        casualties:
        - assessed: false
          injuries:
          - severity: 0.8
            name: Laceration
            location: right forearm
          - severity: 0.8
            name: Laceration
            location: right forearm
          unstructured: unstructured
          name: Mary
          id: id
          tag: delayed
          vitals:
            RR: 40
            SpO2%: 95
            pain: 8
            consciousness: true
            mmHg: 180
            hrpmin: 150
          demographics:
            sex: F
            rank: Marine
            age: 32
        - assessed: false
          injuries:
          - severity: 0.8
            name: Laceration
            location: right forearm
          - severity: 0.8
            name: Laceration
            location: right forearm
          unstructured: unstructured
          name: Mary
          id: id
          tag: delayed
          vitals:
            RR: 40
            SpO2%: 95
            pain: 8
            consciousness: true
            mmHg: 180
            hrpmin: 150
          demographics:
            sex: F
            rank: Marine
            age: 32
        elapsedTime: 5.2
    Mission:
      required:
      - mission_type
      - unstructured
      type: object
      properties:
        unstructured:
          type: string
          description: natural language description of current mission
          example: Protect the high value intelligence officer.
        mission_type:
          type: string
          description: enum of possible mission types
          enum:
          - Listening/Observation
          - Direct Action
          - Hostage rescue
          - Asset transport
          - Sensor emplacement
          - Intelligence gathering
          - Civil affairs
          - Training
          - Sabotage
          - Security patrol
          - Fire support
          - Nuclear deterrence
      description: encapsulates the scenario's strategic mission
      example:
        unstructured: Protect the high value intelligence officer.
        mission_type: Listening/Observation
    Environment:
      required:
      - unstructured
      type: object
      properties:
        unstructured:
          type: string
          description: a natural language description of the environment
        weather:
          type: string
          description: a natural language description of local weather conditions
          example: rainy
        location:
          type: string
          description: a natural language description of where the scenario takes
            place
          example: jungle
        terrain:
          type: string
          description: a natural language description of the local terrain
          example: dense forest with a nearby rocky streambed
        flora:
          type: string
          description: a natural language description of the local flora
          example: lush jungle vegetation
        fauna:
          type: string
          description: a natural language description of the local fauna
          example: "many insects, some amphibians and reptiles"
        soundscape:
          type: string
          description: a natural language description of the local soundscape
          example: burbling brook punctuated by enemy gunfire
        aidDelay:
          type: number
          description: "time until tactical evacuation or exfiltration, in minutes"
          example: 40
        temperature:
          type: number
          description: numerical temperature in degrees Fahrenheit
          example: 82.5
        humidity:
          type: number
          description: percentage of relative humidity
          example: 80
        lighting:
          type: number
          description: an numeric indicator (0-1) of current lighting conditions (natural
            or man-made); lower is darker
          example: 0.7
        visibility:
          type: number
          description: "an numeric indicator (0-1) of current visibility conditions;\
            \ lower is darker. Affected by time of day, lighting, weather, terrain,\
            \ etc."
          example: 0.5
        noise_ambient:
          type: number
          description: an numeric indicator (0-1) of ambient noise at the scenario
            location; higher is louder
          example: 0.5
        noise_peak:
          type: number
          description: an numeric indicator (0-1) of peak noise at the scenario location;
            higher is louder
          example: 0.8
      description: an encapsulation of environmental factors at the scenario location
      example:
        visibility: 0.5
        fauna: "many insects, some amphibians and reptiles"
        flora: lush jungle vegetation
        lighting: 0.7
        noise_peak: 0.8
        noise_ambient: 0.5
        aidDelay: 40
        unstructured: unstructured
        weather: rainy
        temperature: 82.5
        humidity: 80
        location: jungle
        terrain: dense forest with a nearby rocky streambed
        soundscape: burbling brook punctuated by enemy gunfire
    ThreatState:
      required:
      - unstructured
      type: object
      properties:
        unstructured:
          type: string
          description: text description of current threat state
          example: No additional threats are detected.
        threats:
          type: array
          description: An array of threats
          items:
            $ref: '#/components/schemas/Threat'
      description: encapsulation of the state of threat for participants in the scenario
      example:
        unstructured: No additional threats are detected.
        threats:
        - key: threats
        - key: threats
    Threat:
      type: object
      additionalProperties:
        type: string
      description: |-
        list of pairs of type (enum like IED, Gunshots, fire, etc)
        and severity (float 0 (no threat) - 1 (max severity))
    Supplies:
      required:
      - quantity
      - type
      type: object
      properties:
        type:
          type: string
          description: an enum of available supply types
          example: Tourniquet
          enum:
          - Tourniquet
          - Pressure bandage
          - Hemostatic gauze
          - Decompression Needle
          - Nasopharyngeal airway
        quantity:
          type: integer
          description: the number (count) of this item available to the medic at the
            present time
          format: int32
          example: 4
      description: a single type of medical supply available to the medic
      example:
        quantity: 4
        type: Tourniquet
    Casualty:
      required:
      - id
      - unstructured
      type: object
      properties:
        id:
          type: string
          description: "string, globally unique casualty identifier"
        unstructured:
          type: string
          description: natural language text description of the casualty
        name:
          type: string
          description: "the name of the casualty, omit if unknown"
          example: Mary
        demographics:
          $ref: '#/components/schemas/Demographics'
        injuries:
          type: array
          description: an array of casualty injuries
          items:
            $ref: '#/components/schemas/Injury'
        vitals:
          $ref: '#/components/schemas/Vitals'
        assessed:
          type: boolean
          description: whether or not this casualty has been assessed in the current
            scenario
          default: false
        tag:
          type: string
          description: "the tag assigned to this casualty, omit if untagged"
          example: delayed
          enum:
          - minimal
          - delayed
          - immediate
          - expectant
          - deceased
      description: encapulation of a single casualty/patient in the scenario
      example:
        assessed: false
        injuries:
        - severity: 0.8
          name: Laceration
          location: right forearm
        - severity: 0.8
          name: Laceration
          location: right forearm
        unstructured: unstructured
        name: Mary
        id: id
        tag: delayed
        vitals:
          RR: 40
          SpO2%: 95
          pain: 8
          consciousness: true
          mmHg: 180
          hrpmin: 150
        demographics:
          sex: F
          rank: Marine
          age: 32
    Demographics:
      type: object
      properties:
        age:
          type: integer
          description: "the age of the casualty, omit if unknown"
          format: int16
          example: 32
        sex:
          type: string
          description: "the sex of the casualty, omit if unknown/indeterminate"
          example: F
          enum:
          - M
          - F
        rank:
          type: string
          description: "The military status of the casualty, omit if unknown"
          enum:
          - Marine
          - FMF Corpsman
          - Sailor
          - Civilian
          - SEAL
      description: demographic profile of a casualty
      example:
        sex: F
        rank: Marine
        age: 32
    Injury:
      type: object
      properties:
        name:
          type: string
          description: a brief label for the type of injury
          example: Laceration
          enum:
          - Forehead Scrape
          - Ear Bleed
          - Asthmatic
          - Laceration
          - Puncture
          - Shrapnel
          - Chest Collapse
          - Amputation
        location:
          type: string
          description: the injury location on the casualty's body
          example: right forearm
          enum:
          - right forearm
          - left forearm
          - right calf
          - left calf
          - right thigh
          - left thigh
          - right stomach
          - left stomach
          - right bicep
          - left bicep
          - right shoulder
          - left shoulder
          - right side
          - left side
          - right calf
          - left calf
          - right wrist
          - left wrist
          - left face
          - right face
          - unknown or unspecified
        severity:
          type: number
          description: the apparent severity of the injury from 0 (low) to 1.0 (high)
          example: 0.8
      description: an injury on a casualty. This could potentially use a controlled
        vocabulary.
      example:
        severity: 0.8
        name: Laceration
        location: right forearm
    Vitals:
      type: object
      properties:
        consciousness:
          type: boolean
          description: whether or not the patient is conscious
          example: true
        hrpmin:
          type: integer
          description: heart rate in beats per minute
          format: int16
          example: 150
        mmHg:
          type: integer
          description: blood pressure in mmHg
          format: int16
          example: 180
        RR:
          type: integer
          description: respiratory rate in breaths/minute
          format: int16
          example: 40
        SpO2%:
          type: integer
          description: "Oxygen saturation level, expressed as a percentage"
          format: int16
          example: 95
        pain:
          type: integer
          description: "1-10 scale, omit if unknown or unconscious"
          format: int16
          example: 8
      description: "vital levels for a casualty, omit properties if unknown"
      example:
        RR: 40
        SpO2%: 95
        pain: 8
        consciousness: true
        mmHg: 180
        hrpmin: 150
    TriageCategory:
      type: object
      properties:
        tagLabel:
          type: string
          example: minimal
          enum:
          - minimal
          - delayed
          - immediate
          - expectant
          - deceased
        description:
          type: string
          description: a one-line description of the tagLabel category
        criteria:
          type: string
          description: detailed criteria for the tagLabel category
      description: The type of supported triage categories for this scenario
      example:
        criteria: criteria
        description: description
        tagLabel: minimal
    Action:
      required:
      - action_type
      - casualty_id
      - scenario_id
      type: object
      properties:
        scenario_id:
          type: string
          description: scenario ID this probe is for
        action_type:
          type: string
          description: The action type taken from a controlled vocabulary
          example: TREAT_PATIENT
          enum:
          - TREAT_PATIENT
          - TAG_PATIENT
          - DIRECT_PATIENT_TO_SAFE_ZONE
          - CHECK_PULSE
          - CHECK_RESPIRATION
          - CHECK_CONSCIOUSNESS
          - CHECK_VITAL
          - CHECK_VITALS
          - TBD_MORE
        casualty_id:
          type: string
          description: The ID of the casualty being acted upon
        unstructured:
          type: string
          description: a plain text unstructured description of the action
          example: "Check heart rate of casualty [1234]."
        justification:
          type: string
          description: A justification of the action taken
          example: Casualty is the VIP of the scenario
        parameter1:
          type: string
          description: Possible approach-- the first action-specific parameter; see
            action reference
          example: Tourniquet
        parameter2:
          type: string
          description: Possible approach-- the second action-specific parameter; see
            action reference
          example: right forearm
        parameters:
          type: array
          description: Possible approach-- an array of parameters
          items:
            type: object
            additionalProperties:
              type: string
            description: key-value pairs containing additional action parameters
            example:
              units: 1
        supplies:
          type: array
          description: Possible approach-- a list of supplies used as part of the
            action
          items:
            $ref: '#/components/schemas/Supplies'
        timestamp:
          type: string
          description: The current time in the scenario as populated by TA3
      description: An encapulation of a single action taken by a DM
      example:
        action_type: TREAT_PATIENT
        casualty_id: casualty_id
        supplies:
        - quantity: 4
          type: Tourniquet
        - quantity: 4
          type: Tourniquet
        unstructured: "Check heart rate of casualty [1234]."
        justification: Casualty is the VIP of the scenario
        parameters:
        - units: 1
        - units: 1
        scenario_id: scenario_id
        parameter2: right forearm
        parameter1: Tourniquet
        timestamp: timestamp
  responses:
    server_error:
      description: An exception occurred on the server; see returned error string.
      content:
        text/plain:
          schema:
            type: string
            x-content-type: text/plain
    state_returned:
      description: "Successful operation, scenario state returned"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/State'

