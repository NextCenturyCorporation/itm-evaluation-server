openapi: 3.0.3
info:
  description: |-
    This is the specification of the TA3 API for In The Moment (ITM).  Currently, the Evaluation API for TA2 supports functionality for the Phase 1 Evaluation.

    The API is based on the OpenAPI 3.0.3 specification.
  title: ITM TA3 API
  version: 0.4.0
servers:
- url: /
tags:
- description: Endpoints for TA2 Evaluation
  name: itm-ta2-eval
paths:
  /ta2/getAlignmentTarget:
    get:
      description: Retrieve alignment target for the scenario with the specified id
      operationId: get_alignment_target
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      - description: The ID of the scenario for which to retrieve alignment target
        explode: true
        in: query
        name: scenario_id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlignmentTarget"
          description: "Successful operation, alignment target returned"
        "400":
          description: Scenario Complete or Invalid Session ID
        "404":
          description: Scenario ID not found
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Retrieve alignment target for the scenario
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/getSessionAlignment:
    get:
      description: Retrieve the current session alignment for the session with the
        specified id
      operationId: get_session_alignment
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      - description: alignment target id
        explode: true
        in: query
        name: target_id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlignmentResults"
          description: "Successful Response; if server is configured to run without\
            \ TA1, then session alignment will be empty/None/null."
        "400":
          description: Session ID not found
        "403":
          description: Session alignment can only be requested during a training session
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
        "503":
          description: Could not get session alignment from TA1
      summary: Retrieve session alignment from TA1
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/intendAction:
    post:
      description: Express intent to take the specified Action within a scenario
      operationId: intend_action
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Action"
        description: Encapsulation of the intended action by a DM in the context of
          the scenario
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/State"
          description: "Successful operation, scenario state returned"
        "400":
          description: "Invalid action or Session ID, or did not specify an intent\
            \ action"
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Express intent to take an action within a scenario
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/scenario:
    get:
      description: "Get the next scenario in a session with the specified ADM name,\
        \ returning a Scenario object and unique id"
      operationId: start_scenario
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      - description: the scenario id to run; incompatible with /ta2/startSession's
          max_scenarios parameter
        explode: true
        in: query
        name: scenario_id
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Scenario"
          description: "Successful operation; scenario data returned, or session_complete\
            \ is True"
        "400":
          description: "Invalid Session ID, there is already an active scenario, or\
            \ scenario_id was specified with max_scenarios"
        "404":
          description: Scenario ID not found
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
        "503":
          description: Could not communicate with TA1 server
      summary: Get the next scenario
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/startSession:
    get:
      description: Get unique session id for grouping answers from a collection of
        scenarios together
      operationId: start_session
      parameters:
      - description: A self-assigned ADM name.
        explode: true
        in: query
        name: adm_name
        required: true
        schema:
          type: string
        style: form
      - description: a profile of the ADM in terms of its alignment strategy
        explode: true
        in: query
        name: adm_profile
        required: false
        schema:
          type: string
        style: form
      - description: "the type of session to start (`eval`, `test`, or a TA1 name)"
        explode: true
        in: query
        name: session_type
        required: true
        schema:
          example: eval
          type: string
        style: form
      - description: A domain supported by the ITM evaluation server
        explode: true
        in: query
        name: domain
        required: false
        schema:
          type: string
        style: form
      - description: "whether this is a `full`, `solo`, or non-training session with\
          \ TA2"
        explode: true
        in: query
        name: kdma_training
        required: false
        schema:
          type: string
        style: form
      - description: "the maximum number of scenarios requested, not supported in\
          \ `eval` sessions"
        explode: true
        in: query
        name: max_scenarios
        required: false
        schema:
          format: int16
          type: integer
        style: form
      responses:
        "200":
          content:
            text/plain:
              schema:
                description: a new session Id to use in subsequent calls
                type: string
                x-content-type: text/plain
          description: Successful operation
        "400":
          description: Invalid session type or max_scenarios
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
        "503":
          description: The server is not ready to start a session
      summary: Start a new session
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/takeAction:
    post:
      description: Take the specified Action within a scenario
      operationId: take_action
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Action"
        description: Encapsulation of an action taken by a DM in the context of the
          scenario
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/State"
          description: "Successful operation, scenario state returned"
        "400":
          description: "Invalid action or Session ID, or specified an intent action"
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Take an action within a scenario
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/validateAction:
    post:
      description: Validate that the specified Action is structually and contextually
        valid within a scenario
      operationId: validate_action
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Action"
        description: Encapsulation of an action to be validated by a DM in the context
          of the scenario
      responses:
        "200":
          content:
            text/plain:
              schema:
                description: "'valid action'/'valid intention' if the action/intention\
                  \ is valid, otherwise a string describing why it is invalid"
                type: string
                x-content-type: text/plain
          description: "Successful operation, returns 'valid action'/'valid intention'\
            \ if the action/intention is valid, otherwise a string describing why\
            \ it is invalid"
        "400":
          description: Invalid Session ID
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Validate an action within a scenario
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/getAvailableActions:
    get:
      description: Retrieve a list of currently available actions in the scenario
        with the specified id
      operationId: get_available_actions
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      - description: The ID of the scenario for which to retrieve available actions
        explode: false
        in: path
        name: scenario_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Action"
                type: array
                x-content-type: application/json
          description: Successful operation; array of possible Actions returned
        "400":
          description: Scenario Complete or Invalid Session ID
        "404":
          description: Scenario ID not found
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Get a list of currently available ADM actions
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
  /ta2/{scenario_id}/getState:
    get:
      description: Retrieve state of the scenario with the specified id
      operationId: get_scenario_state
      parameters:
      - description: "a unique session_id, as returned by /ta2/startSession"
        explode: true
        in: query
        name: session_id
        required: true
        schema:
          type: string
        style: form
      - description: the ID of the scenario for which to retrieve status
        explode: false
        in: path
        name: scenario_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/State"
          description: "Successful operation, scenario state returned"
        "400":
          description: Invalid Session ID
        "404":
          description: Scenario ID not found
        "500":
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
          description: An exception occurred on the server; see returned error string.
      summary: Retrieve scenario state
      tags:
      - itm-ta2-eval
      x-openapi-router-controller: swagger_server.controllers.itm_ta2_eval_controller
components:
  responses:
    server_error:
      content:
        text/plain:
          schema:
            type: string
            x-content-type: text/plain
      description: An exception occurred on the server; see returned error string.
    state_returned:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/State"
      description: "Successful operation, scenario state returned"
  schemas:
    Scenario:
      description: a scenario requiring decisions by a decision-maker
      example:
        session_complete: true
        name: name
        scenes:
        - probe_config:
          - probe_id: probe_id
            description: description
          - probe_id: probe_id
            description: description
          restricted_actions:
          - SEARCH
          action_mapping:
          - probe_id: probe_id
            action_condition_semantics: and
            probe_condition_semantics: null
            action_type: END_SCENE
            intent_action: false
            character_id: character_id
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            next_scene: next_scene
            action_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            action_id: action_01
            probe_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            repeatable: false
            unstructured: unstructured
            kdma_association:
              key: 0.08008282
            choice: choice
            parameters:
            - character_id: Mike
          - probe_id: probe_id
            action_condition_semantics: and
            probe_condition_semantics: null
            action_type: END_SCENE
            intent_action: false
            character_id: character_id
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            next_scene: next_scene
            action_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            action_id: action_01
            probe_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            repeatable: false
            unstructured: unstructured
            kdma_association:
              key: 0.08008282
            choice: choice
            parameters:
            - character_id: Mike
          id: id
          state:
            characters:
            - attribute_rating: 0.14658129
              medical_condition: 0.6027456
              unstructured: 22-year-old male with brown hair
              name: Mike
              rapport: loathing
              id: id
              unseen: false
              demographics:
                role: Not specified
                race: American Indian
                sex: M
                age: 74
            - attribute_rating: 0.14658129
              medical_condition: 0.6027456
              unstructured: 22-year-old male with brown hair
              name: Mike
              rapport: loathing
              id: id
              unseen: false
              demographics:
                role: Not specified
                race: American Indian
                sex: M
                age: 74
            unstructured: unstructured
            meta_info:
              scene_id: scene_id
              probe_response:
                probe_id: probe_id
                justification: justification
                choice: choice
                scenario_id: scenario_id
            elapsed_time: 10
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            scenario_complete: true
            events:
            - action_id: action_id
              unstructured: unstructured
              relevant_state:
              - "threat_state.threats[gunshots].threat_type"
              - "threat_state.threats[gunshots].threat_type"
              source: source
              type: change
              when: 0.8008282
              object: object
            - action_id: action_id
              unstructured: unstructured
              relevant_state:
              - "threat_state.threats[gunshots].threat_type"
              - "threat_state.threats[gunshots].threat_type"
              source: source
              type: change
              when: 0.8008282
              object: object
          end_scene_allowed: true
          persist_characters: true
          transitions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          next_scene: next_scene
          removed_characters:
          - removed_characters
          - removed_characters
          transition_semantics: null
        - probe_config:
          - probe_id: probe_id
            description: description
          - probe_id: probe_id
            description: description
          restricted_actions:
          - SEARCH
          action_mapping:
          - probe_id: probe_id
            action_condition_semantics: and
            probe_condition_semantics: null
            action_type: END_SCENE
            intent_action: false
            character_id: character_id
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            next_scene: next_scene
            action_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            action_id: action_01
            probe_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            repeatable: false
            unstructured: unstructured
            kdma_association:
              key: 0.08008282
            choice: choice
            parameters:
            - character_id: Mike
          - probe_id: probe_id
            action_condition_semantics: and
            probe_condition_semantics: null
            action_type: END_SCENE
            intent_action: false
            character_id: character_id
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            next_scene: next_scene
            action_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            action_id: action_01
            probe_conditions:
              elapsed_time_gt: 5
              elapsed_time_lt: 5
              probe_responses:
              - probe-1-choice2
              probes:
              - probe-1
              actions:
              - - actions
                - actions
              - - actions
                - actions
            repeatable: false
            unstructured: unstructured
            kdma_association:
              key: 0.08008282
            choice: choice
            parameters:
            - character_id: Mike
          id: id
          state:
            characters:
            - attribute_rating: 0.14658129
              medical_condition: 0.6027456
              unstructured: 22-year-old male with brown hair
              name: Mike
              rapport: loathing
              id: id
              unseen: false
              demographics:
                role: Not specified
                race: American Indian
                sex: M
                age: 74
            - attribute_rating: 0.14658129
              medical_condition: 0.6027456
              unstructured: 22-year-old male with brown hair
              name: Mike
              rapport: loathing
              id: id
              unseen: false
              demographics:
                role: Not specified
                race: American Indian
                sex: M
                age: 74
            unstructured: unstructured
            meta_info:
              scene_id: scene_id
              probe_response:
                probe_id: probe_id
                justification: justification
                choice: choice
                scenario_id: scenario_id
            elapsed_time: 10
            threat_state:
              unstructured: Gunshots have been reported in the surrounding area
              threats:
              - type: gunfire
                severity: moderate
            scenario_complete: true
            events:
            - action_id: action_id
              unstructured: unstructured
              relevant_state:
              - "threat_state.threats[gunshots].threat_type"
              - "threat_state.threats[gunshots].threat_type"
              source: source
              type: change
              when: 0.8008282
              object: object
            - action_id: action_id
              unstructured: unstructured
              relevant_state:
              - "threat_state.threats[gunshots].threat_type"
              - "threat_state.threats[gunshots].threat_type"
              source: source
              type: change
              when: 0.8008282
              object: object
          end_scene_allowed: true
          persist_characters: true
          transitions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          next_scene: next_scene
          removed_characters:
          - removed_characters
          - removed_characters
          transition_semantics: null
        id: id
        state:
          characters:
          - attribute_rating: 0.14658129
            medical_condition: 0.6027456
            unstructured: 22-year-old male with brown hair
            name: Mike
            rapport: loathing
            id: id
            unseen: false
            demographics:
              role: Not specified
              race: American Indian
              sex: M
              age: 74
          - attribute_rating: 0.14658129
            medical_condition: 0.6027456
            unstructured: 22-year-old male with brown hair
            name: Mike
            rapport: loathing
            id: id
            unseen: false
            demographics:
              role: Not specified
              race: American Indian
              sex: M
              age: 74
          unstructured: unstructured
          meta_info:
            scene_id: scene_id
            probe_response:
              probe_id: probe_id
              justification: justification
              choice: choice
              scenario_id: scenario_id
          elapsed_time: 10
          threat_state:
            unstructured: Gunshots have been reported in the surrounding area
            threats:
            - type: gunfire
              severity: moderate
          scenario_complete: true
          events:
          - action_id: action_id
            unstructured: unstructured
            relevant_state:
            - "threat_state.threats[gunshots].threat_type"
            - "threat_state.threats[gunshots].threat_type"
            source: source
            type: change
            when: 0.8008282
            object: object
          - action_id: action_id
            unstructured: unstructured
            relevant_state:
            - "threat_state.threats[gunshots].threat_type"
            - "threat_state.threats[gunshots].threat_type"
            source: source
            type: change
            when: 0.8008282
            object: object
        first_scene: first_scene
      properties:
        id:
          description: a globally unique id for the scenario
          title: id
          type: string
        name:
          description: "human-readable scenario name, not necessarily unique"
          title: name
          type: string
        first_scene:
          description: indicates the first/opening scene ID in the scenario
          title: first_scene
          type: string
        session_complete:
          description: "set to true if the session is complete; that is, there are\
            \ no more scenarios"
          title: session_complete
          type: boolean
        state:
          $ref: "#/components/schemas/State"
        scenes:
          description: A list of specification for all scenes in the scenario
          items:
            $ref: "#/components/schemas/Scene"
          title: scenes
          type: array
      required:
      - id
      - name
      - state
      title: Scenario
      type: object
    AlignmentResults:
      description: Computed KDMA profile and alignment score for a set of decisions.
      example:
        score: 0.08008281904610115
        alignment_source:
        - probes:
          - probes
          - probes
          scenario_id: scenario_id
        - probes:
          - probes
          - probes
          scenario_id: scenario_id
        alignment_target_id: alignment_target_id
        kdma_values:
        - scores:
          - 0.6027456
          - 0.6027456
          kdes:
            key:
              label: label
              kde: kde
          value: 0.08008282
          kdma: kdma
        - scores:
          - 0.6027456
          - 0.6027456
          kdes:
            key:
              label: label
              kde: kde
          value: 0.08008282
          kdma: kdma
      properties:
        alignment_source:
          items:
            $ref: "#/components/schemas/AlignmentSource"
          title: Alignment Source
          type: array
        alignment_target_id:
          description: ID of desired profile to align responses to.
          title: Alignment Target Id
          type: string
        score:
          description: "Measured alignment, 0 (completely unaligned) - 1 (completely\
            \ aligned)."
          maximum: 1
          minimum: 0
          title: Score
          type: number
        kdma_values:
          description: Computed KDMA profile from results
          items:
            $ref: "#/components/schemas/KDMA_Value"
          title: KDMA Values
          type: array
      required:
      - alignment_source
      - alignment_target_id
      - score
      title: AlignmentResults
      type: object
    KDMAProfile:
      description: KDMA Profile
      properties:
        computed_kdma_profile:
          items:
            $ref: "#/components/schemas/KDMA_Value"
          title: Computed KDMA Profile
          type: array
      required:
      - computed_kdma_profile
      title: Computed KDMA Profile (SoarTech)
      type: object
    AlignmentSource:
      description: |-
        Describes which session/probe responses were used to
        compute an alignment score, allowing for lots of flexibility.
      example:
        probes:
        - probes
        - probes
        scenario_id: scenario_id
      properties:
        scenario_id:
          description: Unique ID for user session.
          title: Scenario Id
          type: string
        probes:
          description: List of ID's of probes used to compute alignment.
          items:
            type: string
          title: Probes
          type: array
      required:
      - probes
      - scenario_id
      title: AlignmentSource
      type: object
    AlignmentTarget:
      description: list of KDMAs to align to
      example:
        kdma_values:
        - scores:
          - 0.6027456
          - 0.6027456
          kdes:
            key:
              label: label
              kde: kde
          value: 0.08008282
          kdma: kdma
        - scores:
          - 0.6027456
          - 0.6027456
          kdes:
            key:
              label: label
              kde: kde
          value: 0.08008282
          kdma: kdma
        id: id
      properties:
        id:
          description: globally unique alignment target id
          title: id
          type: string
        kdma_values:
          description: list of KDMAs to align to
          items:
            $ref: "#/components/schemas/KDMA_Value"
          title: kdma_values
          type: array
      required:
      - id
      - kdma_values
      title: AlignmentTarget
      type: object
    KDE_Data:
      description: KDE Objects representing a KDMA Measurement
      example:
        label: label
        kde: kde
      properties:
        kde:
          description: sklearn.neighbors.KernelDensity serialized to base64 string
          title: kde
          type: string
        label:
          description: Label for this KDE
          title: label
          type: string
      required:
      - kde
      - label
      title: KDE_Data
      type: object
    KDMA_Value:
      description: "Single KDMA value with value(s) between 0 and 1, or a kernel density\
        \ estimate of the KDMA value."
      example:
        scores:
        - 0.6027456
        - 0.6027456
        kdes:
          key:
            label: label
            kde: kde
        value: 0.08008282
        kdma: kdma
      properties:
        kdma:
          description: Name of KDMA
          title: kdma
          type: string
        value:
          description: "Numeric score for a given KDMA, 0-1 scale"
          format: float
          maximum: 1.0
          minimum: 0.0
          title: value
          type: number
        scores:
          description: Ordered KDMA scores
          items:
            description: "Numeric score for a given KDMA, 0-1 scale"
            format: float
            maximum: 1.0
            minimum: 0.0
            type: number
          title: scores
          type: array
        kdes:
          additionalProperties:
            $ref: "#/components/schemas/KDE_Data"
          description: KDE Objects representing a KDMA Measurement
          title: kdes
          type: object
      required:
      - kdma
      title: KDMA_Value
      type: object
    BaseState:
      description: Base state for the scene or scenario
      properties:
        unstructured:
          description: "Natural language, plain text description of a scene's state"
          title: unstructured
          type: string
        elapsed_time:
          description: The simulated elapsed time (in seconds) since the scenario
            started
          example: 10
          title: elapsed_time
          type: integer
        meta_info:
          $ref: "#/components/schemas/MetaInfo"
        events:
          description: A list of scenario events to inform decision-making
          items:
            $ref: "#/components/schemas/Event"
          title: events
          type: array
        threat_state:
          $ref: "#/components/schemas/ThreatState"
        characters:
          description: A list of characters in the scene
          items:
            $ref: "#/components/schemas/Character"
          title: characters
          type: array
        scenario_complete:
          description: set to true if the scenario is complete; subsequent calls involving
            that scenario will return an error code
          title: scenario_complete
          type: boolean
      required:
      - characters
      - unstructured
      title: BaseState
      type: object
    State:
      allOf:
      - $ref: "#/components/schemas/DomainState"
      - $ref: "#/components/schemas/BaseState"
      description: The complete state of the scene or scenario
      example:
        characters:
        - attribute_rating: 0.14658129
          medical_condition: 0.6027456
          unstructured: 22-year-old male with brown hair
          name: Mike
          rapport: loathing
          id: id
          unseen: false
          demographics:
            role: Not specified
            race: American Indian
            sex: M
            age: 74
        - attribute_rating: 0.14658129
          medical_condition: 0.6027456
          unstructured: 22-year-old male with brown hair
          name: Mike
          rapport: loathing
          id: id
          unseen: false
          demographics:
            role: Not specified
            race: American Indian
            sex: M
            age: 74
        unstructured: unstructured
        meta_info:
          scene_id: scene_id
          probe_response:
            probe_id: probe_id
            justification: justification
            choice: choice
            scenario_id: scenario_id
        elapsed_time: 10
        threat_state:
          unstructured: Gunshots have been reported in the surrounding area
          threats:
          - type: gunfire
            severity: moderate
        scenario_complete: true
        events:
        - action_id: action_id
          unstructured: unstructured
          relevant_state:
          - "threat_state.threats[gunshots].threat_type"
          - "threat_state.threats[gunshots].threat_type"
          source: source
          type: change
          when: 0.8008282
          object: object
        - action_id: action_id
          unstructured: unstructured
          relevant_state:
          - "threat_state.threats[gunshots].threat_type"
          - "threat_state.threats[gunshots].threat_type"
          source: source
          type: change
          when: 0.8008282
          object: object
      title: State
      type: object
    MetaInfo:
      description: Includes meta info to assist with debugging. Only provided during
        training sessions.
      example:
        scene_id: scene_id
        probe_response:
          probe_id: probe_id
          justification: justification
          choice: choice
          scenario_id: scenario_id
      properties:
        scene_id:
          description: "The scene ID, unique throughout the scenario"
          title: scene_id
          type: string
        probe_response:
          $ref: "#/components/schemas/ProbeResponse"
      title: MetaInfo
      type: object
    ThreatState:
      description: Description of the current risks or threats to the characters
      example:
        unstructured: Gunshots have been reported in the surrounding area
        threats:
        - type: gunfire
          severity: moderate
      properties:
        unstructured:
          description: "Natural language, plain text description of environmental\
            \ risks or threats"
          type: string
        threats:
          description: A list of pairs of threat types with a severity descriptor
          items:
            $ref: "#/components/schemas/Threat"
          type: array
      required:
      - threats
      - unstructured
      title: ThreatState
      type: object
    Threat:
      description: threats in the environment that could affect decision-making
      properties:
        threat_type:
          $ref: "#/components/schemas/ThreatTypeEnum"
        severity:
          $ref: "#/components/schemas/ThreatSeverityEnum"
      required:
      - severity
      - threat_type
      title: Threat
      type: object
    Event:
      description: a unit of structured communication from scenario to ADM
      example:
        action_id: action_id
        unstructured: unstructured
        relevant_state:
        - "threat_state.threats[gunshots].threat_type"
        - "threat_state.threats[gunshots].threat_type"
        source: source
        type: change
        when: 0.8008282
        object: object
      properties:
        unstructured:
          description: "Natural language, plain text description of the event"
          title: unstructured
          type: string
        type:
          $ref: "#/components/schemas/EventTypeEnum"
        source:
          description: The 'subject' of the event; can be a character `id` or an `EntityTypeEnum`
          title: source
          type: string
        object:
          description: The 'object' of the event; can be a character `id` or an `EntityTypeEnum`
          title: object
          type: string
        when:
          description: indicates when (in minutes) the event happened (negative value)
            or is expected to happen (positive value); omit if zero (event happens
            now)
          format: float
          title: when
          type: number
        action_id:
          description: An action ID from among the available actions
          title: action_id
          type: string
        relevant_state:
          description: An array of relevant state for the Event
          items:
            description: |
              string paths within the `State` object, in which indexed lists are context-sensitive and usually domain-specific: for a character, it's the id; for a threat, it's the threat_type;
            example: "threat_state.threats[gunshots].threat_type"
            type: string
          title: relevant_state
          type: array
      required:
      - type
      - unstructured
      title: Event
      type: object
    BaseCharacter:
      description: a character in the scene
      properties:
        id:
          description: A unique character ID throughout the scenario
          title: id
          type: string
        name:
          description: "display name, as in a dashboard"
          example: Mike
          title: name
          type: string
        unstructured:
          description: "Natural language, plain text description of the character"
          example: 22-year-old male with brown hair
          title: unstructured
          type: string
        demographics:
          $ref: "#/components/schemas/Demographics"
        rapport:
          $ref: "#/components/schemas/RapportEnum"
        unseen:
          default: false
          description: whether or not this character is visible in the scene or merely
            heard or reported about from a nearby location
          title: unseen
          type: boolean
      required:
      - demographics
      - id
      - name
      - unstructured
      title: BaseCharacter
      type: object
    Character:
      allOf:
      - $ref: "#/components/schemas/DomainCharacter"
      - $ref: "#/components/schemas/BaseCharacter"
      description: a character in the scene
      example:
        attribute_rating: 0.14658129
        medical_condition: 0.6027456
        unstructured: 22-year-old male with brown hair
        name: Mike
        rapport: loathing
        id: id
        unseen: false
        demographics:
          role: Not specified
          race: American Indian
          sex: M
          age: 74
      title: Character
      type: object
    BaseDemographics:
      description: Basic properties about the character
      properties:
        age:
          description: "the age of the character, omit if unknown"
          format: int16
          maximum: 125
          minimum: 0
          title: age
          type: integer
        sex:
          $ref: "#/components/schemas/DemographicSexEnum"
        race:
          $ref: "#/components/schemas/RaceEnum"
        role:
          $ref: "#/components/schemas/CharacterRoleEnum"
      required:
      - race
      - sex
      title: BaseDemographics
      type: object
    Demographics:
      allOf:
      - $ref: "#/components/schemas/DomainDemographics"
      - $ref: "#/components/schemas/BaseDemographics"
      description: Basic properties about the character
      example:
        role: Not specified
        race: American Indian
        sex: M
        age: 74
      title: Demographics
      type: object
    Scene:
      description: the specification for a scene in the scenario
      example:
        probe_config:
        - probe_id: probe_id
          description: description
        - probe_id: probe_id
          description: description
        restricted_actions:
        - SEARCH
        action_mapping:
        - probe_id: probe_id
          action_condition_semantics: and
          probe_condition_semantics: null
          action_type: END_SCENE
          intent_action: false
          character_id: character_id
          threat_state:
            unstructured: Gunshots have been reported in the surrounding area
            threats:
            - type: gunfire
              severity: moderate
          next_scene: next_scene
          action_conditions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          action_id: action_01
          probe_conditions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          repeatable: false
          unstructured: unstructured
          kdma_association:
            key: 0.08008282
          choice: choice
          parameters:
          - character_id: Mike
        - probe_id: probe_id
          action_condition_semantics: and
          probe_condition_semantics: null
          action_type: END_SCENE
          intent_action: false
          character_id: character_id
          threat_state:
            unstructured: Gunshots have been reported in the surrounding area
            threats:
            - type: gunfire
              severity: moderate
          next_scene: next_scene
          action_conditions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          action_id: action_01
          probe_conditions:
            elapsed_time_gt: 5
            elapsed_time_lt: 5
            probe_responses:
            - probe-1-choice2
            probes:
            - probe-1
            actions:
            - - actions
              - actions
            - - actions
              - actions
          repeatable: false
          unstructured: unstructured
          kdma_association:
            key: 0.08008282
          choice: choice
          parameters:
          - character_id: Mike
        id: id
        state:
          characters:
          - attribute_rating: 0.14658129
            medical_condition: 0.6027456
            unstructured: 22-year-old male with brown hair
            name: Mike
            rapport: loathing
            id: id
            unseen: false
            demographics:
              role: Not specified
              race: American Indian
              sex: M
              age: 74
          - attribute_rating: 0.14658129
            medical_condition: 0.6027456
            unstructured: 22-year-old male with brown hair
            name: Mike
            rapport: loathing
            id: id
            unseen: false
            demographics:
              role: Not specified
              race: American Indian
              sex: M
              age: 74
          unstructured: unstructured
          meta_info:
            scene_id: scene_id
            probe_response:
              probe_id: probe_id
              justification: justification
              choice: choice
              scenario_id: scenario_id
          elapsed_time: 10
          threat_state:
            unstructured: Gunshots have been reported in the surrounding area
            threats:
            - type: gunfire
              severity: moderate
          scenario_complete: true
          events:
          - action_id: action_id
            unstructured: unstructured
            relevant_state:
            - "threat_state.threats[gunshots].threat_type"
            - "threat_state.threats[gunshots].threat_type"
            source: source
            type: change
            when: 0.8008282
            object: object
          - action_id: action_id
            unstructured: unstructured
            relevant_state:
            - "threat_state.threats[gunshots].threat_type"
            - "threat_state.threats[gunshots].threat_type"
            source: source
            type: change
            when: 0.8008282
            object: object
        end_scene_allowed: true
        persist_characters: true
        transitions:
          elapsed_time_gt: 5
          elapsed_time_lt: 5
          probe_responses:
          - probe-1-choice2
          probes:
          - probe-1
          actions:
          - - actions
            - actions
          - - actions
            - actions
        next_scene: next_scene
        removed_characters:
        - removed_characters
        - removed_characters
        transition_semantics: null
      properties:
        id:
          description: "The scene ID, unique throughout the scenario"
          title: id
          type: string
        state:
          $ref: "#/components/schemas/State"
        next_scene:
          description: "The ID of the default next scene in the scenario; if empty\
            \ or missing, then by default this is the last scene."
          title: next_scene
          type: string
        end_scene_allowed:
          description: Whether ADMs can explicitly end the scene
          title: end_scene_allowed
          type: boolean
        persist_characters:
          description: Whether characters should persist from the previous scene
          title: persist_characters
          type: boolean
        removed_characters:
          description: List of character ids to be removed from the scene
          items:
            type: string
          title: removed_characters
          type: array
        probe_config:
          description: "TA1-provided probe configuration, ignored by TA3"
          items:
            $ref: "#/components/schemas/ProbeConfig"
          title: probe_config
          type: array
        action_mapping:
          description: List of actions with details of how those actions map to probe
            responses
          items:
            $ref: "#/components/schemas/ActionMapping"
          title: action_mapping
          type: array
        restricted_actions:
          description: List of actions that will be excluded from get_available_actions
          example:
          - SEARCH
          items:
            $ref: "#/components/schemas/ActionTypeEnum"
          title: restricted_actions
          type: array
        transition_semantics:
          $ref: "#/components/schemas/SemanticTypeEnum"
        transitions:
          $ref: "#/components/schemas/Conditions"
      required:
      - action_mapping
      - end_scene_allowed
      - id
      title: Scene
      type: object
    Action:
      description: An action taken by an ADM
      example:
        action_id: action_01
        action_type: END_SCENE
        intent_action: false
        unstructured: unstructured
        kdma_association:
          key: 0.08008282
        character_id: character_id
        threat_state:
          unstructured: Gunshots have been reported in the surrounding area
          threats:
          - type: gunfire
            severity: moderate
        justification: justification
        parameters:
        - character_id: Mike
      properties:
        action_id:
          description: A unique action ID within the scenario
          example: action_01
          title: action_id
          type: string
        action_type:
          $ref: "#/components/schemas/ActionTypeEnum"
        intent_action:
          default: false
          description: Whether this action is to be taken or intended
          title: intent_action
          type: boolean
        unstructured:
          description: "Natural language, plain text description of the action"
          title: unstructured
          type: string
        character_id:
          description: The ID of the character being acted upon
          title: character_id
          type: string
        threat_state:
          $ref: "#/components/schemas/ThreatState"
        parameters:
          additionalProperties:
            type: string
          description: "key-value pairs containing additional [action-specific parameters](https://github.com/NextCenturyCorporation/itm-evaluation-client?tab=readme-ov-file#available-actions)"
          example:
          - character_id: Mike
          title: parameters
          type: object
        justification:
          description: A justification of the action taken
          title: justification
          type: string
        kdma_association:
          additionalProperties:
            format: float
            maximum: 1.0
            minimum: 0.0
            type: number
          description: "KDMA associations for this choice, if provided by TA1"
          title: kdma_association
          type: object
      required:
      - action_id
      - action_type
      title: Action
      type: object
    ActionMapping:
      description: Details for how a given action maps to a probe response
      example:
        probe_id: probe_id
        action_condition_semantics: and
        probe_condition_semantics: null
        action_type: END_SCENE
        intent_action: false
        character_id: character_id
        threat_state:
          unstructured: Gunshots have been reported in the surrounding area
          threats:
          - type: gunfire
            severity: moderate
        next_scene: next_scene
        action_conditions:
          elapsed_time_gt: 5
          elapsed_time_lt: 5
          probe_responses:
          - probe-1-choice2
          probes:
          - probe-1
          actions:
          - - actions
            - actions
          - - actions
            - actions
        action_id: action_01
        probe_conditions:
          elapsed_time_gt: 5
          elapsed_time_lt: 5
          probe_responses:
          - probe-1-choice2
          probes:
          - probe-1
          actions:
          - - actions
            - actions
          - - actions
            - actions
        repeatable: false
        unstructured: unstructured
        kdma_association:
          key: 0.08008282
        choice: choice
        parameters:
        - character_id: Mike
      properties:
        action_id:
          description: A unique action ID within the scenario
          example: action_01
          title: action_id
          type: string
        action_type:
          $ref: "#/components/schemas/ActionTypeEnum"
        unstructured:
          description: "Natural language, plain text description of the action"
          title: unstructured
          type: string
        repeatable:
          default: false
          description: Whether or not this action should remain after it's selected
            by an ADM
          title: repeatable
          type: boolean
        character_id:
          description: The ID of the character being acted upon
          title: character_id
          type: string
        intent_action:
          default: false
          description: Whether this mapping is to take an action or to intend one
          title: intent_action
          type: boolean
        threat_state:
          $ref: "#/components/schemas/ThreatState"
        parameters:
          additionalProperties:
            type: string
          description: "key-value pairs containing additional [action-specific parameters](https://github.com/NextCenturyCorporation/itm-evaluation-client?tab=readme-ov-file#available-actions)"
          example:
          - character_id: Mike
          title: parameters
          type: object
        probe_id:
          description: A valid probe_id from the appropriate TA1
          title: probe_id
          type: string
        choice:
          description: A valid choice for the specified probe_id
          title: choice
          type: string
        next_scene:
          description: The ID of the next scene in the scenario; overrides Scene.next_scene
          title: next_scene
          type: string
        kdma_association:
          additionalProperties:
            format: float
            maximum: 1.0
            minimum: 0.0
            type: number
          description: "KDMA associations for this choice, if provided by TA1"
          title: kdma_association
          type: object
        action_condition_semantics:
          $ref: "#/components/schemas/SemanticTypeEnum"
        action_conditions:
          $ref: "#/components/schemas/Conditions"
        probe_condition_semantics:
          $ref: "#/components/schemas/SemanticTypeEnum"
        probe_conditions:
          $ref: "#/components/schemas/Conditions"
      required:
      - action_id
      - action_type
      - choice
      - probe_id
      - unstructured
      title: ActionMapping
      type: object
    BaseConditions:
      description: Conditions that specify whether to transition to the next scene
        or send a probe response
      properties:
        elapsed_time_lt:
          description: True if the scenario elapsed time (in seconds) is less than
            the specified value
          minimum: 5
          title: elapsed_time_lt
          type: integer
        elapsed_time_gt:
          description: True if the scenario elapsed time (in seconds) is greater than
            the specified value
          minimum: 5
          title: elapsed_time_gt
          type: integer
        actions:
          description: True if any of the specified lists of actions have been taken;
            multiple action ID lists have "or" semantics; multiple action IDs within
            a list have "and" semantics
          items:
            items:
              type: string
            type: array
          title: actions
          type: array
        probes:
          description: True if the specified list of probe_ids have been answered
          example:
          - probe-1
          items:
            type: string
          title: probes
          type: array
        probe_responses:
          description: True if the specified list of probe responses (choice) have
            been sent
          example:
          - probe-1-choice2
          items:
            type: string
          title: probe_responses
          type: array
      title: BaseConditions
      type: object
    Conditions:
      allOf:
      - $ref: "#/components/schemas/DomainConditions"
      - $ref: "#/components/schemas/BaseConditions"
      description: Conditions that specify whether to transition to the next scene
        or send a probe response
      example:
        elapsed_time_gt: 5
        elapsed_time_lt: 5
        probe_responses:
        - probe-1-choice2
        probes:
        - probe-1
        actions:
        - - actions
          - actions
        - - actions
          - actions
      title: Conditions
      type: object
    ProbeConfig:
      description: Probe configuration for use by TA1
      example:
        probe_id: probe_id
        description: description
      properties:
        probe_id:
          description: A valid probe_id from the appropriate TA1
          title: probe_id
          type: string
        description:
          description: A description of the probe for use by TA1
          title: description
          type: string
      title: ProbeConfig
      type: object
    ProbeResponse:
      description: encapsulates the selection by a DM of an option in response to
        a probe
      example:
        probe_id: probe_id
        justification: justification
        choice: choice
        scenario_id: scenario_id
      properties:
        scenario_id:
          description: globally unique scenario ID
          title: scenario_id
          type: string
        probe_id:
          description: globally unique probe ID
          title: probe_id
          type: string
        choice:
          description: id of choice made
          title: choice
          type: string
        justification:
          description: A justification of the response to the probe
          title: justification
          type: string
      required:
      - choice
      - probe_id
      - scenario_id
      title: ProbeResponse
      type: object
    BaseThreatTypeEnum:
      description: the type or nature of the threat
      enum:
      - Unknown
      type: string
    ThreatSeverityEnum:
      description: how dangerous and/or imminent the threat is
      enum:
      - low
      - moderate
      - substantial
      - severe
      - extreme
      title: ThreatSeverityEnum
      type: string
    EventTypeEnum:
      description: an enumeration of available event types; the 'verb' of the event
      enum:
      - change
      - emphasize
      - inform
      - order
      - recommend
      title: EventTypeEnum
      type: string
    MessageTypeEnum:
      description: an enumeration of available message types
      enum:
      - allow
      - ask
      - delegate
      - deny
      - justify
      - recommend
      - wait
      type: string
    DemographicSexEnum:
      description: the sex of the character
      enum:
      - M
      - F
      - Unknown
      title: DemographicSexEnum
      type: string
    RaceEnum:
      description: Race or ethnicity
      enum:
      - American Indian
      - White
      - Hispanic
      - Black
      - Asian
      - Pacific Islander
      - Unknown
      title: RaceEnum
      type: string
    BaseCharacterRoleEnum:
      description: The primary role a character has in the scene
      enum:
      - Unknown
      type: string
    RapportEnum:
      description: A measure of closeness or affinity towards the decision-maker
      enum:
      - loathing
      - dislike
      - neutral
      - close
      - familial
      title: RapportEnum
      type: string
    SemanticTypeEnum:
      default: and
      description: "Whether transition or probe response conditions use and, or, or\
        \ not semantics"
      enum:
      - and
      - or
      - not
      title: SemanticTypeEnum
      type: string
    BaseActionTypeEnum:
      description: "An action type [recognized by the ADM Server](https://github.com/NextCenturyCorporation/itm-evaluation-client?tab=readme-ov-file#available-actions)"
      enum:
      - END_SCENE
      - MOVE_TO
      - MESSAGE
      - SEARCH
      type: string
    DomainState:
      description: the current tactical & environmental state of the scenario and
        of its characters
      type: object
    ThreatTypeEnum:
      description: the type or nature of the threat
      enum:
      - Not specified
      title: ThreatTypeEnum
      type: string
    DomainCharacter:
      description: A character in the scene
      properties:
        medical_condition:
          description: "The treatment priority/urgency of a patient's medical condition,\
            \ 0-1 scale"
          format: float
          maximum: 1.0
          minimum: 0.0
          title: medical_condition
          type: number
        attribute_rating:
          description: |
            A scenario-specific characteristic of the patient or situation regarding the patient, 0-1 scale:
              Merit Focus (MF): degree of blame for a patient: 0.0 doesn't consider merit when deciding who to treat / always treats the medically favored patient; 1.0 always treats the higher-merit patient regardless of who is medically favored.
              Affiliation Focus (AF): degree of closeness for a patient: 0.0 doesn't consider affiliation / always treats the medically favored patient; 1.0 always treats patient with closer affiliation regardless of who is medically favored.
              Search vs. Stay (SS): urgency to search for/treat a patient: 0.0 always stays despite how urgent the need is to treat patient in next room; 1.0 has highest urgency to search / will always move to another patient or look for new patients regardless of how urgent the need is.
              Personal Safety Focus (PS): amount of danger to reach a patient: 0.0 doesn't consider personal safety and always switches to the medically favored patient; 1.0 won't risk personal safety / always stays in safest place regardless of who is medically favored.
          format: float
          maximum: 1.0
          minimum: 0.0
          title: attribute_rating
          type: number
      title: DomainCharacter
      type: object
    CharacterRoleEnum:
      description: The primary role a character has in the scene
      enum:
      - Not specified
      title: CharacterRoleEnum
      type: string
    DomainDemographics:
      description: Basic domain-specific properties about the character
      type: object
    ActionTypeEnum:
      description: "An action type recognized by the ADM Server, combining basic and\
        \ domain-specific actions"
      enum:
      - END_SCENE
      - MOVE_TO
      - MESSAGE
      - SEARCH
      - TREAT_PATIENT
      title: ActionTypeEnum
      type: string
    DomainConditions:
      description: Domain-specific conditions that specify whether to transition to
        the next scene or send a probe response
      type: object
